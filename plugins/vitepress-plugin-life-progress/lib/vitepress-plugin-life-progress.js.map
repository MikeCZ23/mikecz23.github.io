{"version":3,"file":"vitepress-plugin-life-progress.js","sources":["../src/template.vue","../src/index.ts"],"sourcesContent":["<template>\n  <div class=\"life-progress\">\n    <ul>\n      <li\n        v-for=\"(i, idx) in months\"\n        :key=\"i\"\n      >\n        <span class=\"filler\" :style=\"{\n          width: `${i.width}%`\n        }\" />\n        <div v-if=\"idx === month\" :style=\"{\n          opacity: showLabel ? 1 : 0,\n          width: `${i.width}%`,\n        }\" class=\"label-box\">\n          <span class=\"month\">{{i.name}}</span>\n          <span class=\"day\">{{date}}</span>\n        </div>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport {ref, computed, onUnmounted} from 'vue'\n\nconst props = defineProps<{\n  customEventName: string\n}>()\nconst showLabel = ref(false)\nconst handleChangeLabelStatus = (visible: boolean = true) => showLabel.value = visible\n\nconst monthShortNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Zář', 'Oct', 'Nov', 'Dec']\n\nconst getToday = () => new Date()\nconst getFullDayNumber = (year, mon) => new Date(year, mon, 0).getDate() \nconst today = ref(getToday())\nconst year = computed(() => today.value.getFullYear())\nconst month = computed(() => today.value.getMonth())\nconst date = computed(() => today.value.getDate())\nconst fullDayNum = computed(() => getFullDayNumber(year.value, month.value))\nconst months = computed(() => monthShortNames.map((mon, index) => ({\n  name: mon,\n  width: index < month.value ? 100 : index === month.value ? date.value / fullDayNum.value * 100 : 0\n})))\n\n// CustomEvent\nconst event = (ev) => handleChangeLabelStatus(ev.detail)\nwindow.addEventListener(props.customEventName, event)\nonUnmounted(() => {\n  window.removeEventListener(props.customEventName, event)\n})\n\n// Why can't I get handleChangeLabelStatus in index.ts?...\n// defineExpose({\n//   handleChangeLabelStatus,\n// })\n</script>\n\n<style lang=\"postcss\">\n.VPNavBar{\n  /* z-index: 1; */\n}\n.life-progress{\n  width: 100%;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n  ul {\n    display: flex;\n    width: 100%;\n    li {\n      position: relative;\n      flex-grow: 1;\n      height: 2px;\n      list-style: none;\n      font-size: 12px;\n      line-height: 24px;\n      background-color: var(--vp-c-text-4);\n      color: var(--vp-c-text-2);\n      &:not(:last-child) {\n        margin-right: 2px;\n      }\n      .filler {\n        position: absolute;\n        display: inline-block;\n        height: 100%;\n        background-color: var(--vp-c-text-1);\n      }\n      .label-box {\n        position: absolute;\n        display: flex;\n        justify-content: space-between;\n        transition: 500ms;\n        .month {}\n        .day {\n          transform: translateX(50%);\n        }\n      }\n    }\n  }\n}\n</style>","import {render, createVNode, onMounted} from 'vue'\nimport type {ComponentInternalInstance, ComponentPublicInstance} from 'vue'\nimport LifeProgressCom from './template.vue'\n\nconst customEventName = 'vitepress-life-progress'\nconst mountLifeProgressDom = () => {\n  /**\n   * Why is it mounted on VPNav instead of body?\n   *  - We need the VPNav element as the trigger tagert for LifeProgressCom, so we finally need to get the VPNav element...\n   */\n  const vpNav = document.getElementsByClassName('VPNav')[0]\n  const vnode = createVNode(LifeProgressCom, {\n    customEventName,\n  })\n  const boxEl = document.createElement('div')\n  vpNav.appendChild(boxEl)\n  render(vnode, boxEl)\n\n  const instance = vnode.component as ComponentInternalInstance\n  const vm = instance.proxy as ComponentPublicInstance\n  return {\n    mountEl: vpNav,\n    vm,\n  }\n}\nconst mountTriggerEvent = (el: Element) => {\n  el.addEventListener('mouseenter', () => window.dispatchEvent(new CustomEvent(customEventName, {detail: true})))\n  el.addEventListener('mouseleave', () => window.dispatchEvent(new CustomEvent(customEventName, {detail: false})))\n}\n\nconst vitepressLifeProgress = () => {\n  if (typeof window === 'undefined') return\n\n  onMounted(() => {\n    const {mountEl} = mountLifeProgressDom()\n    mountTriggerEvent(mountEl)\n  })\n}\n\nexport default vitepressLifeProgress\n"],"names":["showLabel","ref","handleChangeLabelStatus","visible","monthShortNames","getToday","getFullDayNumber","year","mon","today","computed","month","date","fullDayNum","months","index","event","ev","props","onUnmounted","customEventName","mountLifeProgressDom","vpNav","vnode","createVNode","LifeProgressCom","boxEl","render","vm","mountTriggerEvent","el","vitepressLifeProgress","onMounted","mountEl"],"mappings":";;;;;;;iBA4BMA,IAAYC,EAAI,EAAK,GACrBC,IAA0B,CAACC,IAAmB,OAASH,EAAU,QAAQG,GAEzEC,IAAkB,CAAC,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,OAAO,QAAQ,OAAO,OAAO,KAAK,GAEtGC,IAAW,MAAM,IAAI,QACrBC,IAAmB,CAACC,GAAMC,MAAQ,IAAI,KAAKD,GAAMC,GAAK,CAAC,EAAE,WACzDC,IAAQR,EAAII,EAAA,CAAU,GACtBE,IAAOG,EAAS,MAAMD,EAAM,MAAM,aAAa,GAC/CE,IAAQD,EAAS,MAAMD,EAAM,MAAM,UAAU,GAC7CG,IAAOF,EAAS,MAAMD,EAAM,MAAM,SAAS,GAC3CI,IAAaH,EAAS,MAAMJ,EAAiBC,EAAK,OAAOI,EAAM,KAAK,CAAC,GACrEG,IAASJ,EAAS,MAAMN,EAAgB,IAAI,CAACI,GAAKO,OAAW;AAAA,MACjE,MAAMP;AAAA,MACN,OAAOO,IAAQJ,EAAM,QAAQ,MAAMI,MAAUJ,EAAM,QAAQC,EAAK,QAAQC,EAAW,QAAQ,MAAM;AAAA,MACjG,CAAC,GAGGG,IAAQ,CAACC,MAAOf,EAAwBe,EAAG,MAAM;AAChD,kBAAA,iBAAiBC,EAAM,iBAAiBF,CAAK,GACpDG,EAAY,MAAM;AACT,aAAA,oBAAoBD,EAAM,iBAAiBF,CAAK;AAAA,IAAA,CACxD;;;;;;;;;;;;;;;;;;;;;;;;;AC9CD,MAAMI,IAAkB,2BAClBC,IAAuB,MAAM;AAKjC,QAAMC,IAAQ,SAAS,uBAAuB,OAAO,EAAE,IACjDC,IAAQC,EAAYC,GAAiB;AAAA,IACzC,iBAAAL;AAAA,EAAA,CACD,GACKM,IAAQ,SAAS,cAAc,KAAK;AAC1C,EAAAJ,EAAM,YAAYI,CAAK,GACvBC,EAAOJ,GAAOG,CAAK;AAGnB,QAAME,IADWL,EAAM,UACH;AACb,SAAA;AAAA,IACL,SAASD;AAAA,IACT,IAAAM;AAAA,EAAA;AAEJ,GACMC,IAAoB,CAACC,MAAgB;AACzC,EAAAA,EAAG,iBAAiB,cAAc,MAAM,OAAO,cAAc,IAAI,YAAYV,GAAiB,EAAC,QAAQ,GAAK,CAAA,CAAC,CAAC,GAC9GU,EAAG,iBAAiB,cAAc,MAAM,OAAO,cAAc,IAAI,YAAYV,GAAiB,EAAC,QAAQ,GAAM,CAAA,CAAC,CAAC;AACjH,GAEMW,IAAwB,MAAM;AAClC,EAAI,OAAO,SAAW,OAEtBC,EAAU,MAAM;AACR,UAAA,EAAC,SAAAC,MAAWZ;AAClB,IAAAQ,EAAkBI,CAAO;AAAA,EAAA,CAC1B;AACH;"}